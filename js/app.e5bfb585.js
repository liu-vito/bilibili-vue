(function(){"use strict";var e={7960:function(e,n,t){var o=t(5130),i=t(6768);const a={id:"app"};function u(e,n,t,o,u,l){const r=(0,i.g2)("VideoPlayer");return(0,i.uX)(),(0,i.CE)("div",a,[(0,i.bF)(r)])}var l=t(4232);const r={class:"video-interaction-container"},s={class:"video-player",ref:"videoPlayer"},c={ref:"videoRef",width:"100%",controls:""},d=["src"],m={class:"danmu-display"},f={class:"video-controls"},p={class:"comments"},v={class:"comment-list"},h={class:"sidebar"},k={class:"danmu"};function g(e,n,t,o,a,u){const g=(0,i.g2)("el-button"),b=(0,i.g2)("el-button-group"),w=(0,i.g2)("el-input"),C=(0,i.g2)("el-col"),y=(0,i.g2)("el-switch"),D=(0,i.g2)("el-row");return(0,i.uX)(),(0,i.CE)("div",r,[(0,i.bF)(D,{gutter:"{20}"},{default:(0,i.k6)((()=>[(0,i.bF)(C,{span:18},{default:(0,i.k6)((()=>[(0,i.Lk)("div",s,[(0,i.Lk)("video",c,[(0,i.Lk)("source",{src:a.videoSrc,type:"video/mp4"},null,8,d),(0,i.eW)(" 您的浏览器不支持 Video 标签。 ")],512),(0,i.Lk)("div",m,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.danmus,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,style:(0,l.Tr)(u.getDanmuStyle(e)),class:"danmu-item"},(0,l.v_)(e.text),5)))),128))])],512),(0,i.Lk)("div",f,[(0,i.bF)(b,null,{default:(0,i.k6)((()=>[(0,i.bF)(g,{icon:"el-icon-thumb",onClick:u.toggleLike},{default:(0,i.k6)((()=>[(0,i.eW)("点赞"+(0,l.v_)(a.likes),1)])),_:1},8,["onClick"]),(0,i.bF)(g,{icon:"el-icon-money",onClick:u.coin},{default:(0,i.k6)((()=>[(0,i.eW)("投币")])),_:1},8,["onClick"]),(0,i.bF)(g,{icon:"el-icon-share",onClick:u.share},{default:(0,i.k6)((()=>[(0,i.eW)("转发")])),_:1},8,["onClick"])])),_:1}),(0,i.bF)(w,{modelValue:a.newDanmu,"onUpdate:modelValue":n[0]||(n[0]=e=>a.newDanmu=e),placeholder:"输入弹幕...",class:"danmu-input"},null,8,["modelValue"]),(0,i.bF)(g,{type:"primary",onClick:u.postDanmu},{default:(0,i.k6)((()=>[(0,i.eW)("发送弹幕")])),_:1},8,["onClick"])]),(0,i.Lk)("div",p,[(0,i.bF)(w,{modelValue:a.newComment,"onUpdate:modelValue":n[1]||(n[1]=e=>a.newComment=e),placeholder:"写下你的评论..."},null,8,["modelValue"]),(0,i.bF)(g,{type:"primary",onClick:u.postComment},{default:(0,i.k6)((()=>[(0,i.eW)("发送")])),_:1},8,["onClick"]),(0,i.Lk)("div",v,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.comments,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"comment"},(0,l.v_)(e.text),1)))),128))])])])),_:1}),(0,i.bF)(C,{span:6},{default:(0,i.k6)((()=>[(0,i.Lk)("div",h,[(0,i.Lk)("div",k,[(0,i.bF)(y,{modelValue:a.danmuEnabled,"onUpdate:modelValue":n[2]||(n[2]=e=>a.danmuEnabled=e),"active-text":"弹幕开"},null,8,["modelValue"])])])])),_:1})])),_:1})])}t(4114);var b={data(){return{likes:0,newComment:"",comments:[],danmus:[],newDanmu:"",danmuEnabled:!0,videoSrc:t(4008)}},methods:{toggleLike(){this.likes++},coin(){this.$message("投币成功！")},share(){this.$message("分享成功！")},postComment(){""!==this.newComment.trim()&&(this.comments.push({id:Date.now(),text:this.newComment}),this.newComment="")},postDanmu(){if(""!==this.newDanmu.trim()){const e={id:Date.now(),text:this.newDanmu};console.log("Posting danmu:",e),this.danmus.push(e),this.newDanmu="",console.log("Current danmus:",this.danmus),setTimeout((()=>{this.removeDanmu(e.id)}),this.getDanmuDuration())}},removeDanmu(e){console.log("Removing danmu with id:",e),this.danmus=this.danmus.filter((n=>n.id!==e)),console.log("Current danmus after removal:",this.danmus)},getDanmuStyle(){const e=this.getDanmuDuration()/1e3,n={animation:`danmu-move-8ef35988 ${e}s linear`,left:"100%",top:90*Math.random()+"%"};return console.log("Danmu style:",n),n},getTextWidth(e){const n=document.createElement("canvas"),t=n.getContext("2d");t.font="20px Arial";const o=t.measureText(e);return console.log("Text width for",e,":",o.width),o.width},getDanmuDuration(){const e=this.$refs.videoPlayer.clientWidth,n=100,t=e/n*1e3;return console.log("Danmu duration:",t),t}}},w=t(1241);const C=(0,w.A)(b,[["render",g],["__scopeId","data-v-3b4a1860"]]);var y=C,D={name:"App",components:{VideoPlayer:y}};const _=(0,w.A)(D,[["render",u]]);var x=_,F=t(9543);t(4188);const E=(0,o.Ef)(x);E.use(F.A),E.mount("#app")},4008:function(e,n,t){e.exports=t.p+"media/1.2b8a32d3.mp4"}},n={};function t(o){var i=n[o];if(void 0!==i)return i.exports;var a=n[o]={exports:{}};return e[o].call(a.exports,a,a.exports,t),a.exports}t.m=e,function(){var e=[];t.O=function(n,o,i,a){if(!o){var u=1/0;for(c=0;c<e.length;c++){o=e[c][0],i=e[c][1],a=e[c][2];for(var l=!0,r=0;r<o.length;r++)(!1&a||u>=a)&&Object.keys(t.O).every((function(e){return t.O[e](o[r])}))?o.splice(r--,1):(l=!1,a<u&&(u=a));if(l){e.splice(c--,1);var s=i();void 0!==s&&(n=s)}}return n}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[o,i,a]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){t.p="/bilibili-vue/"}(),function(){var e={524:0};t.O.j=function(n){return 0===e[n]};var n=function(n,o){var i,a,u=o[0],l=o[1],r=o[2],s=0;if(u.some((function(n){return 0!==e[n]}))){for(i in l)t.o(l,i)&&(t.m[i]=l[i]);if(r)var c=r(t)}for(n&&n(o);s<u.length;s++)a=u[s],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(c)},o=self["webpackChunkmy_danmaku_app"]=self["webpackChunkmy_danmaku_app"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=t.O(void 0,[504],(function(){return t(7960)}));o=t.O(o)})();
//# sourceMappingURL=app.e5bfb585.js.map